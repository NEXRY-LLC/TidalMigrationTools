APPL JCTEST44 WAIT NOPOST_WHILE_WAITING

INVOKE 'SWS.ESP.APPL.PROCLIB(#DISTRIB)'

/*****************************************************/
/*****************************************************/
/*- TEST OF REEXEC COMMAND
/*****************************************************/

TAG TEST
  /*ECHO !USER1
  /*ECHO !USER2
  /*ECHO !USER3
  /*ECHO !USER4

JOB START.!ESPAPPL LINK PROCESS
  RUN TODAY
/*RELDELAY 5
  RELEASE ADD(SWESPJC2)
ENDJOB

JOB SWESPJC2
  CCCHK RC(1:4095) FAIL CONTINUE
  /*DATASET 'FTRF.TSTJOBS'
  RUN TODAY
  RELDELAY 30 SEC
  RELEASE ADD(REEXEC01(A))
  RELEASE ADD(REEXEC02(A))
  RELEASE ADD(REEXEC03(A))
ENDJOB

JOB REEXEC01 CONDITIONAL LINK PROCESS
  ESP AJ SWESPJC2 RESUBMIT APPL(JCTEST44.0)
  IF ESPREEXEC#=0 THEN RUN TODAY
  REEXEC AT('REALNOW PLUS 1 MIN') MAXIMUM(3)
ENDJOB

JOB REEXEC02 CONDITIONAL LINK PROCESS
  ESP AJ SWESPJC2 RESUBMIT APPL(JCTEST44.0)
  IF ESPREEXEC#=1 THEN RUN TODAY
  REEXEC AT('REALNOW PLUS 1 MIN') MAXIMUM(3)
ENDJOB

JOB REEXEC03 CONDITIONAL LINK PROCESS
  ESP AJ SWESPJC2 RESUBMIT APPL(JCTEST44.0)
  IF ESPREEXEC#=2 THEN RUN TODAY
  REEXEC AT('REALNOW PLUS 1 MIN') MAXIMUM(3)
ENDJOB

APPLEND TRIGNEW1.!ESPAPPL
   ESPNOMSG TRIGGER !ESPEVENT ADD
ENDJOB

