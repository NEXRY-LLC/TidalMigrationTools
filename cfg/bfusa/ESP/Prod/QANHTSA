APPL QANHTSA WAIT

INVOKE 'SWS.ESP.APPL.PROCLIB(#DISTRIB)'

/**********************************************************************/
/*10/18/2016-JFC-CONVERTED LIE JOB FROM MVS TO LINK                   */
/*05/20/2019-JFC-DISABLED THE 2 SUBMIT.CD JOBS PER REQUEST            */
/**********************************************************************/

NOTIFY FAILURE ABEND ALERT(REMD)
NOTIFY FAILURE ABEND MAILBOX(QAFAIL)
TAG PPIW

DATA_OBJECT PARMSET.!ESPAPPL
   /*Create a timestamp in hhmmMMDDYY format*/
   SETVAR TMSTMP='!ESPSHH.:!ESPSMN.,!ESPSMM./!ESPSDD./!ESPSYY'
   SETVAR PID=''
   SETVAR STMPTM='!ESPSMM./!ESPSDD./!ESPSYY.,!ESPSHH.:!ESPSMN'
ENDJOB

JOB SETPID.!ESPAPPL LINK PROCESS
   VINCR (PID) TABLE(CDPROD) CLANG
   VGET  (PID) TABLE(CDPROD) CLANG
   ESP MGRMSG * . . . PARMSET.!ESPAPPL/!ESPAPPL..!ESPAPGEN/MAIN +
   ACTION SET PID(!PID)
 /*RUN TODAY
   RELEASE ADD(CD_NHTSA_000012T_AC_XMLCDP)
ENDJOB

JOB SETPIDA.!ESPAPPL LINK PROCESS
   VINCR (PID) TABLE(CDPROD) CLANG
   VGET  (PID) TABLE(CDPROD) CLANG
   ESP MGRMSG * . . . PARMSET.!ESPAPPL/!ESPAPPL..!ESPAPGEN/MAIN +
   ACTION SET PID(!PID)
 /*RUN TODAY
   RELEASE ADD(CD_NHTSA_000012T_DC_XMLCDP)
ENDJOB

JOB LIS.QANHTSA LINK PROCESS
   RUN TODAY
   RELEASE ADD(LOCK_NHTSA_REPORTINGCMD)
ENDJOB

NT_JOB LOCK_NHTSA_REPORTINGCMD
   AGENT CYBA_PPIWPROD
   CMDNAME X:\cmd_scripts\lock_nhtsa_reporting.cmd
   ARGS
   USER maestro
   RUN TODAY
   RELEASE ADD(NHTSA_CONNECT_DIRECT_CONTROLCMD)
ENDJOB

NT_JOB NHTSA_CONNECT_DIRECT_CONTROLCMD
   AGENT CYBA_PPIWPROD
   CMDNAME X:\cmd_scripts\nhtsa_connect_direct_control.cmd
   ARGS
   USER maestro
   RUN TODAY
   RELEASE ADD(CD_NHTSA_000012T_AC_XMLCDP)
ENDJOB

NT_JOB CD_NHTSA_000012T_AC_XMLCDP
   AGENT CYBA_CDC1AKFIS
   EARLYSUB REALNOW PLUS 10 SECONDS
   PID= WOBDATA('PARMSET.!ESPAPPL','PID')
   CMDNAME D:\site\apps\cdnt\batchcmd\submit.cmd
   ARGS cd_nhtsa_000012t_ac_xml.cdp 0 !PID
   USER cdprod
 /*RUN TODAY
   RELEASE ADD(CD_NHTSA_000012T_DC_XMLCDP)
ENDJOB

NT_JOB CD_NHTSA_000012T_DC_XMLCDP
   AGENT CYBA_CDC1AKFIS
   EARLYSUB REALNOW PLUS 10 SECONDS
   PID= WOBDATA('PARMSET.!ESPAPPL','PID')
   CMDNAME D:\site\apps\cdnt\batchcmd\submit.cmd
   ARGS CD_NHTSA_000012T_DC_XML.cdp 0 !PID
   USER cdprod
 /*RUN TODAY
   RELEASE ADD(UNLOCK_NHTSA_REPORTINGCMD)
ENDJOB

NT_JOB UNLOCK_NHTSA_REPORTINGCMD
   AGENT CYBA_PPIWPROD
   CMDNAME X:\cmd_scripts\unlock_nhtsa_reporting.cmd
   ARGS
   USER maestro
   RUN TODAY
   RELEASE ADD(LIE.QANHTSA)
   NOTIFY JOBEND MAILBOX(TreadActReporting)
ENDJOB

JOB LIE.QANHTSA LINK PROCESS
   RUN TODAY
ENDJOB

