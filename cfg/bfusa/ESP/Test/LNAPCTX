APPL LNAPCTX WAIT

INVOKE 'SWS.ESP.APPL.PROCLIB(#DISTRIB)'

/**********************************************************************/
/* Changed JPMC signing key        02/23/16     JRE                   */
/*                                                                    */
/* 12/10/18 -VMD- CHANGED SERVER NAME IN SEND JOB PER MICHAEL MCKENNEY*/
/*           CHANGED FROM OLD NAME sfgint01pnsh.bfusa.com to          */
/*           NEW NAME sfgint01pakr.idm.bfusa.com                      */
/* 01/14/19 -JFC- CHANGED CCCHK FOR LNAPCTX FROM 1:4095               */
/*03/23/2020 -JFC- UPDATED ENCRYPT KEY PER INC000002193720            */
/*06/26/2020 -JFC- TURNED OFF JOB END NOTIFICATION PER INC000002258818 /
/*11/24/2021 -VV - Updated new sterling server-JPM scripts-REQ0098535 */
/**********************************************************************/

NOTIFY FAILURE ABEND ALERT(REMD)

JOB LNAPCTX
  /*@@ SYSTEM=LAWSON
  CCCHK RC(5:4095) FAIL CONTINUE
  RUN TODAY
  RELEASE ADD(LNSNDCTX)
ENDJOB

JOB LNSNDCTX
  /*@@ SYSTEM=LAWSON
  OPTIONS RESTARTSTEP
  CCCHK RC(1:4095) FAIL CONTINUE
  RUN TODAY
  DELAYSUB 7.30
  IF ESPSHH GT '07' AND ESPSHH LT '21' THEN DELAYSUB REALNOW PLUS 1 HOUR
  IF TODAY('FRI') AND ESPSHH GT '20' THEN DELAYSUB 8.30 TODAY PLUS 1 WO+
RKDAY
  IF TODAY('SAT SUN') THEN DELAYSUB 7.30 TODAY PLUS 1 WORKDAY
  RELEASE ADD(ENCRYPT_LAWSON_3797_APSNDCTX_TO_JPMC)
ENDJOB

LINUX_JOB ENCRYPT_LAWSON_3797_APSNDCTX_TO_JPMC
   AGENT CYBA_PGP2AKFIS
   SCRIPTNAME /usr/local/scripts/pgpencrypt.sh
   USER ceadmin
   ARGS LAW_JPMC_3797_APSNDCTX* "JPMC_GTI_MFT_FTS" +
"bs_signing_key_JPMC_GTI_exp2022"
  IF TODAY('FRI') AND ESPSHH GT '20' THEN DELAYSUB 7.30 TODAY PLUS 1 WO+
RKDAY
  IF TODAY('SAT SUN') THEN RUN TODAY PLUS 1 WORKDAY
   RUN TODAY
   RELDELAY 1
   RELEASE ADD(SEND_LAWSON_3797_APSNDCTX_TO_JPMC)
ENDJOB

LINUX_JOB SEND_LAWSON_3797_APSNDCTX_TO_JPMC
   AGENT CYBA_PGP2AKFIS
   SCRIPTNAME /usr/local/scripts/scpsend.sh
   USER root
   ARGS -u JPMCHASE -p 'BjF&Um$c' -h +
   bsa-securetransfersint.bfusa.com -P +
10022 -f /home/ceadmin/LAW_JPMC_3797_APSNDCTX_*.pgp
   RUN TODAY
   IF TODAY('FRI') AND ESPSHH GT '20' THEN DELAYSUB 7.30 TODAY PLUS 1 W+
ORKDAY
   IF TODAY('SAT SUN') THEN RUN TODAY PLUS 1 WORKDAY
   RELEASE ADD(JPMC_TO_LAWSON_9999_APRCVACK_LNRCVCTX)
ENDJOB

FILE_TRIGGER JPMC_TO_LAWSON_9999_APRCVACK_LNRCVCTX
   AGENT CYBA_PGP2AKFIS
   FILENAME '/home/ceadmin/JPMC_LAW_9999_APRCVACK_+
??????????????.pgp' CREATE NOCHANGE(1)
   RUN TODAY
   IF TODAY('FRI') AND ESPSHH GT '20' THEN DELAYSUB 7.30 TODAY PLUS 1 W+
ORKDAY
   IF TODAY('SAT SUN') THEN RUN TODAY PLUS 1 WORKDAY
   RELEASE ADD(DECRYPT_JPMC_LAW_9999_APRCVACK_LNRCVCTX)
ENDJOB

LINUX_JOB DECRYPT_JPMC_LAW_9999_APRCVACK_LNRCVCTX
    AGENT CYBA_PGP2AKFIS
    SCRIPTNAME /usr/local/scripts/pgpdecrypt.sh
    USER ceadmin
    ARGS JPMC_LAW_9999_APRCVACK_??????????????.pgp
    RUN TODAY
    IF TODAY('FRI') AND ESPSHH GT '20' THEN DELAYSUB 7.30 TODAY PLUS 1 +
WORKDAY
    IF TODAY('SAT SUN') THEN RUN TODAY PLUS 1 WORKDAY
    RELEASE ADD(LNRCVCTX)
ENDJOB

JOB LNRCVCTX
  /*@@ SYSTEM=LAWSON
  OPTIONS RESTARTSTEP
  CCCHK RC(1:4095) FAIL CONTINUE
/*NOTIFY JOBEND ABEND FAILURE MAILBOX(BKPKC1AP)
  RUN TODAY
  IF TODAY('FRI') AND ESPSHH GT '20' THEN DELAYSUB 7.30 TODAY PLUS 1 WO+
RKDAY
  IF TODAY('SAT SUN') THEN RUN TODAY PLUS 1 WORKDAY
ENDJOB

